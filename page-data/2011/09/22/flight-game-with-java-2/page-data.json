{"componentChunkName":"component---src-templates-page-tsx","path":"/2011/09/22/flight-game-with-java-2/","webpackCompilationHash":"e5e0a94e368acafd71f1","result":{"data":{"site":{"siteMetadata":{"title":"Lacti's Archive","description":"All about I learned","author":{"name":"Jaeyoung, Choi","url":"https://twitter.com/lacti"}}},"markdownRemark":{"html":"<p>노란색 타원 대신 비행기 이미지를 제대로 띄워보자.<br>\n자바에서 이미지를 읽는 것은 간단하다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk10\">java</span><span class=\"mtk1\">.</span><span class=\"mtk10\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">java</span><span class=\"mtk1\">.</span><span class=\"mtk12\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;player.gif&quot;</span><span class=\"mtk1\">);</span></span></code></pre>\n<p>AWT에서 제공해주는 <code>Toolkit</code>의 helper function인 <code>getImage</code> 함수를 통해 이미지 객체를 얻을 수 있다. (물론 player.gif 는 프로젝트 안에 들어있어야 한다.)</p>\n<p>그럼 이제 그리는 방법을 알아보자.<br>\n그림을 그리는 것도 당연하지만, <code>Graphics</code> 객체가 존재하는 <code>paintComponent</code> 함수에서 이루어진다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk12\">java</span><span class=\"mtk1\">.</span><span class=\"mtk12\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Graphics</span><span class=\"mtk1\"> g) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>마지막에 들어가는 this는 <code>ImageObserver</code> 라고 한다.\nToolkit은 큰 Image를 읽어달라고 요청받으면 MediaTracker라는 요상한 것을 써서 비동기적으로 읽고 그 결과를 <code>ImageObserver</code>에게 알려준다.\n즉,</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk10\">java</span><span class=\"mtk1\">.</span><span class=\"mtk10\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">java</span><span class=\"mtk1\">.</span><span class=\"mtk12\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;veryBigShip.bmp&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipWidth</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">()</span></span></code></pre>\n<p>와 같이 했을 때 ship 객체는 아직 데이터가 읽어지지 않은 상태에서 <code>getWidth</code> 함수가 호출되어 저기서 반환되는 값이 이상한 값이 될 수가 있다. (이 때문에 ImageIO 와 BufferedImage 객체를 쓰지만 그건 나중에 이야기하자)<br>\n따라서 <code>ImageObserver</code>라는 callback을 써서 데이터가 없을 때는 일단 가짜 정보가 반환되고, 실제로 로딩이 완료되면 <code>ImageObserver</code> 내의 <code>imageUpdate</code> 함수를 호출해주어서 이미지 로딩 완료를 알려준다는 것이다.</p>\n<p>여기서 this는 <code>JPanel</code> 객체이다. AWT 라이브러리들은 기본 <code>imageUpdate</code> 함수가 구현되어있으므로 처리하기 귀찮은 <code>ImageObserver</code>에는 <code>this</code>를 넣어주면 된다.<br>\n(자세하게 설명하는건 이 글타래의 취지에 맞지 않으니 더 이상의 자세한 설명은 생략한다.)</p>\n<p>아무튼 위의 방법으로 비행기를 그리면 중앙이 맞지 않기 때문에 그림의 width, height 값으로 보정을 해주어야한다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk12\">java</span><span class=\"mtk1\">.</span><span class=\"mtk12\">awt</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Graphics</span><span class=\"mtk1\"> g) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>매번 width와 height를 가져와달라고 호출하니 효율이 영 좋지 못할 것 같지만, 자바로 짜는 상황에서 효율을 너무 고려하면 슬퍼지니까 그러려니 하고 넘어가자.</p>\n<p>player.gif 파일의 배경이 흰색이므로, 게임 전체 배경색도 흰색으로 바꾸자.\n그러면 전체적으로 아래와 같은 코드가 된다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.event.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> javax.swing.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Tatieul</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPanel</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">KeyListener</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk7\">320</span><span class=\"mtk1\">, </span><span class=\"mtk7\">400</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setPreferredSize</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Dimension</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setFocusable</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">addKeyListener</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        ship = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;player.gif&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyPressed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_UP</span><span class=\"mtk15\">:</span><span class=\"mtk1\">    </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_DOWN</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_LEFT</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_RIGHT</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyReleased</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyTyped</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> </span><span class=\"mtk12\">g</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">white</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fillRect</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">main</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">JFrame</span><span class=\"mtk1\"> </span><span class=\"mtk12\">frame</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JFrame</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Tatieul - New Generation Shooting Game&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setContentPane</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pack</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocationRelativeTo</span><span class=\"mtk1\">(</span><span class=\"mtk4\">null</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setDefaultCloseOperation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">JFrame</span><span class=\"mtk1\">.</span><span class=\"mtk12\">EXIT_ON_CLOSE</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setVisible</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>자 이제 총알을 날려보자.<br>\nSpace키를 누르면 총알을 만든다. 그 총알은 당연히 위로(-y) 올라갈 것이고, 화면에서 사라지면(y &#x3C; 0) 소멸될 것이다.</p>\n<p>먼저 Space키를 누르면 총알을 만들자. 총알의 종류가 하나 밖에 없으니, 위치 정보만 저장해두자.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt;();</span></span></code></pre>\n<p>이제 Space \\를 누르면 총알을 만들어보자.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_SPACE</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">); </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span></code></pre>\n<p>비행기가 어차피 <code>shipPos</code>를 중앙 삼아서 그려지므로, 위와 같이 총알을 만들면 비행기 한 가운데서 총알이 나가는 것 처럼 보일 것이다.</p>\n<p>이제 시간에 따라 총알이 앞으로 나가야할 것이다.</p>\n<p>시간에 따라 이벤트가 발생하려면 Timer 를 쓰면 된다.<br>\n하지만 Timer 라고 하면 <code>java.util.Timer</code>와 <code>javax.swing.Timer</code> 2개가 있다.\nUI Thread에 의해 동기적으로 처리하는 것이 로직 구성하는데 편하니까 <code>javax.swing.Timer</code>를 쓸거다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">() { </span><span class=\"mtk3\">// Constructor</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> javax.swing.</span><span class=\"mtk11\">Timer</span><span class=\"mtk1\">(</span><span class=\"mtk7\">100</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span></code></pre>\n<p>이제 Timer는 100ms마다 한 번씩 this의 <code>actionPerformed</code> 함수를 불러준다. 즉, <code>Tatieul</code> class는 <code>ActionListener</code> interface를 구현해야 한다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Tatieul</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPanel</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">KeyListener</span><span class=\"mtk1\">, </span><span class=\"mtk10\">ActionListener</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">actionPerformed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">ActionEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// update bullets</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span></code></pre>\n<p>총알은 <code>bullets</code>에 저장되어있다. 이 자료구조를 한 번 돌면서 y 값을 갱신해주면 되겠다.\n하지만, y가 음수인 것에 대해서는 목록에서 빼야하니까, 귀찮다. 이 두 가지를 한 번에 하기 위해 Iterator를 쓰자. (enhanced for 문에서는 중간에 remove 가 불가능하니까.)</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">20</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span></code></pre>\n<p>총알의 위치를 갱신했으면 꼭 <code>repaint</code> 함수를 불러줘야 한다. 그래야 갱신된 위치로 총알을 다시 그린다.</p>\n<p>이제 <code>paintComponent</code> 함수에서 <code>bullets</code> 목록을 돌면서, 총알을 그려보자.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> g) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">black</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawLine</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span></code></pre>\n<p>여기까지하면 전체적인 코드는 다음과 같다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.util.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.event.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> javax.swing.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Tatieul</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPanel</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">KeyListener</span><span class=\"mtk1\">, </span><span class=\"mtk10\">ActionListener</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk7\">320</span><span class=\"mtk1\">, </span><span class=\"mtk7\">400</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setPreferredSize</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Dimension</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setFocusable</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">addKeyListener</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        ship = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;player.gif&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> javax.swing.</span><span class=\"mtk11\">Timer</span><span class=\"mtk1\">(</span><span class=\"mtk7\">100</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">).</span><span class=\"mtk11\">start</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyPressed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_UP</span><span class=\"mtk15\">:</span><span class=\"mtk1\">    </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_DOWN</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_LEFT</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_RIGHT</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_SPACE</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">)); </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">actionPerformed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">ActionEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">20</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyReleased</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyTyped</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> </span><span class=\"mtk12\">g</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">white</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fillRect</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">black</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawLine</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">main</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">JFrame</span><span class=\"mtk1\"> </span><span class=\"mtk12\">frame</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JFrame</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Tatieul - New Generation Shooting Game&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setContentPane</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pack</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocationRelativeTo</span><span class=\"mtk1\">(</span><span class=\"mtk4\">null</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setDefaultCloseOperation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">JFrame</span><span class=\"mtk1\">.</span><span class=\"mtk12\">EXIT_ON_CLOSE</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setVisible</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>여기까지 따라 해봤다면, 키 입력에 상당한 불만이 생길 것이다.\nSpace키를 누르면서 방향 키를 누르면, 분명 총알도 나가면서 이동도 되면 좋겠지만 전혀 그렇지 않고 총알이 안 나간채로 움직이기만 하는 것을 볼 수 있다.</p>\n<p>이러한 것을 단박에 개선하고 싶지만, 일단 다음은 적기 출현과 충돌 검사를 먼저 구현해보자.</p>\n<style class=\"vscode-highlight-styles\">:root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n.default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n\n.default-dark .mtk1 { color: #D4D4D4; }\n.default-dark .mtk2 { color: #1E1E1E; }\n.default-dark .mtk3 { color: #6A9955; }\n.default-dark .mtk4 { color: #569CD6; }\n.default-dark .mtk5 { color: #D16969; }\n.default-dark .mtk6 { color: #D7BA7D; }\n.default-dark .mtk7 { color: #B5CEA8; }\n.default-dark .mtk8 { color: #CE9178; }\n.default-dark .mtk9 { color: #646695; }\n.default-dark .mtk10 { color: #4EC9B0; }\n.default-dark .mtk11 { color: #DCDCAA; }\n.default-dark .mtk12 { color: #9CDCFE; }\n.default-dark .mtk13 { color: #000080; }\n.default-dark .mtk14 { color: #F44747; }\n.default-dark .mtk15 { color: #C586C0; }\n.default-dark .mtk16 { color: #6796E6; }\n.default-dark .mtk17 { color: #808080; }\n.default-dark .mtki { font-style: italic; }\n.default-dark .mtkb { font-weight: bold; }\n.default-dark .mtku { text-decoration: underline; text-underline-position: under; }</style>","excerpt":"노란색 타원 대신 비행기 이미지를 제대로 띄워보자.자바에서 이미지를 읽는 것은 간단하다.AWT에서 제공해주는 Toolkit의 helper function인 getImage 함수를 통해 이미지 객체를 얻을 수 있다. (물론 player.gif…","fields":{"date":"September 22, 2011","shortdesc":""},"frontmatter":{"title":"자바로 만드는 비행기 게임 2","tags":["java","game"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2011/09/22/flight-game-with-java-2/"}}}