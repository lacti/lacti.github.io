{"componentChunkName":"component---src-templates-page-tsx","path":"/2011/11/06/flight-game-with-java-3/","webpackCompilationHash":"906e474feba7d651d076","result":{"data":{"site":{"siteMetadata":{"title":"Lacti's Archive","description":"All about I learned","author":{"name":"Jaeyoung, Choi","url":"https://twitter.com/lacti"}}},"markdownRemark":{"html":"<p>이번에는 적기의 등장과 충돌검사를 해보자.</p>\n<p>적기는, <code>y=0</code>에서 등장해서 <code>y=height</code>까지 진행한다. 즉, 화면 위쪽에서 아래쪽으로 일직선으로 진행하도록 하자. 그러면 진행하는 y 값은 항상 동일할테니까<code>(0 -> height)</code> 시작과 끝 x 값을 random으로 뽑으면 된다.</p>\n<p>적기의 속도를 다양하게 한다고 한다면 원래 속도를 랜덤하게 구해서 그만큼씩 이동하게 하겠지만, 그렇게 계산해주기 귀찮으니까 등장 시간을 랜덤하게 뽑고(5초에서 10초 사이) 그 시간에 대해 랜덤한 시작좌표 ~ 끝좌표를 토대로 매 tick(100ms)마다 얼마나 이동하면 될지 delta를 구한다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delta</span><span class=\"mtk1\">, </span><span class=\"mtk12\">current</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipHeight</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Random</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rand</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">float</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lifetime</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextFloat</span><span class=\"mtk1\">() * </span><span class=\"mtk7\">50</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">50</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">startX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">endX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        delta = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">((endX - startX) / lifetime, (</span><span class=\"mtk7\">480</span><span class=\"mtk1\"> + shipHeight * </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) / lifetime);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        current = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">(startX, -</span><span class=\"mtk7\">1</span><span class=\"mtk1\"> * shipHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>그러면 매 tick마다 current는 delta만큼 더해주면 된다. 시작 y와 끝 y는 적기가 완전히 지나갈 수 있도록 비행기 그림의 height만큼씩 더 고려해주었다.</p>\n<p>적기를 만들어주는 것도 여러 고려할 것이 있겠지만, 귀찮으니까 랜덤한 시간으로 만들어준다. 일단 <code>spawnTick</code>이라는걸 두어서, 현재 시간이 <code>spawnTick</code>을 넘어갈 때만 적기를 만들고, 그 후 <code>spawnTick</code>을 랜덤하게 갱신한다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">spawnTick</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateEnemy</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (spawnTick &lt; </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        spawnTick = </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">() + </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">().</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2000</span><span class=\"mtk1\">) + </span><span class=\"mtk7\">500</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>이제 매 Tick마다 적기가 움직일 수 있도록 위치 갱신을 해준다. 적기는 +y 방향으로 진행하며, 대충 화면 크기 height가 480 이니까 560정도 지나갈 때 비행기를 없애준다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateEnemyPos</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pos</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">(),</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() &gt; </span><span class=\"mtk7\">560</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>미리 매 tick마다 얼마나 움직일 지 계산해놨으니까, 현재의 위치는 거기서 더해주기만 하면 된다.</p>\n<p>이제 적기도 그려주자. <code>paint</code> 함수에 현재 존재하는 적기들을 그려주도록 하면 된다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(enemy, (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>이제 랜덤한 시간에 랜덤한 위치로 적기가 생성되어서 +y 방향으로 진행하는 것을 볼 수 있다.</p>\n<p>여기까지 코드는 다음과 같다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.util.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.event.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.geom.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> javax.swing.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Tatieul</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPanel</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">KeyListener</span><span class=\"mtk1\">, </span><span class=\"mtk10\">ActionListener</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk7\">320</span><span class=\"mtk1\">, </span><span class=\"mtk7\">400</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">, </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">spawnTick</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setPreferredSize</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Dimension</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setFocusable</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">addKeyListener</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        ship = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;player.png&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        enemy = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;enemy.png&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> javax.swing.</span><span class=\"mtk11\">Timer</span><span class=\"mtk1\">(</span><span class=\"mtk7\">100</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">).</span><span class=\"mtk11\">start</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyPressed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_UP</span><span class=\"mtk15\">:</span><span class=\"mtk1\">    </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_DOWN</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_LEFT</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_RIGHT</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_SPACE</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">)); </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">actionPerformed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">ActionEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">updateEnemyPos</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">updateBullets</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">generateEnemy</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateEnemy</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (spawnTick &lt; </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            spawnTick = </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">() + </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">().</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2000</span><span class=\"mtk1\">) + </span><span class=\"mtk7\">500</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateEnemyPos</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pos</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">(),</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() &gt; </span><span class=\"mtk7\">560</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateBullets</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Point</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">20</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyReleased</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyTyped</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> </span><span class=\"mtk12\">g</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">white</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fillRect</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(enemy, (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">black</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawLine</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">main</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">JFrame</span><span class=\"mtk1\"> </span><span class=\"mtk12\">frame</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JFrame</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Tatieul - New Generation Shooting Game&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setContentPane</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pack</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocationRelativeTo</span><span class=\"mtk1\">(</span><span class=\"mtk4\">null</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setDefaultCloseOperation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">JFrame</span><span class=\"mtk1\">.</span><span class=\"mtk12\">EXIT_ON_CLOSE</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setVisible</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delta</span><span class=\"mtk1\">, </span><span class=\"mtk12\">current</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipHeight</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Random</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rand</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">float</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lifetime</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextFloat</span><span class=\"mtk1\">() * </span><span class=\"mtk7\">50</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">50</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">startX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">endX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        delta = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">((endX - startX) / lifetime, (</span><span class=\"mtk7\">480</span><span class=\"mtk1\"> + shipHeight * </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) / lifetime);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        current = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">(startX, -</span><span class=\"mtk7\">1</span><span class=\"mtk1\"> * shipHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>적기도 총알을 쏴야한다. 하지만 지금까지 총알은 모두 -y 방향(플레이어가 쐈을 때)만 고려되어서 만들어져있다. 따라서 총알도 방향 정보가 추가되어야 한다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">direction</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">direction</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(x, y);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> = direction;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>이에 따라 기존에 총알을 관리하던 코드가 바뀌어야 한다. 플레이어는 -y 방향으로 쏘니까 direction 값이 - 가 될테고, 이를 저장하는 List 는 Point 가 아닌 Bullet 을 가져야할테고, 그림 그리는 곳과 총알이 사라지는 곳까지 다 고쳐주면 된다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyPressed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> e) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_SPACE</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, -</span><span class=\"mtk7\">1</span><span class=\"mtk1\">)); </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateBullets</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> * </span><span class=\"mtk7\">20</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> ((</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                || (</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">560</span><span class=\"mtk1\">))</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> g) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">black</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawLine</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>적기가 총알을 쏴야한다. 간단하게 각 적기가 매 tick마다 random 돌려서 0.3보다 작은 값이 나오면 총알을 만들도록 하자-_-</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateEnemyBullet</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">random</span><span class=\"mtk1\">() &lt; </span><span class=\"mtk7\">0.2</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">((</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">(),</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">(), </span><span class=\"mtk7\">1</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>이제 충돌검사를 구현한다. 본 게임에서는 간단하게 3가지 충돌검사만 구현해보자.</p>\n<ol>\n<li>총알간의 충돌검사</li>\n<li>총알과 비행기의 충돌검사</li>\n<li>비행기간의 충돌검사</li>\n</ol>\n<p>그런데 비행기가 적기와 플레이어의 비행기로 2종류가 있으니 총 5가지 항목에 대해서 검사를 해야한다.\n먼저 매 tick마다 총알간 충돌 검사를 하자.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HashSet</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">() - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; ++i) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = i + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; j &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">(); ++j) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(i), rhs = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(j);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">8</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(rhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">removal</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> removeBulletSet)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(removal);</span></span></code></pre>\n<p>너무 치밀하게 충돌 검사를 하면 탄막놀이가 힘들어지니까 후하게 x범위 4, y범위 10으로 주자-_-</p>\n<p>대충하는 건 좋은데 문제가 생겼다. space 키를 누르고 있으면 그 총알들이 겹쳐서 다 충돌처리가 되어버린다. 이 문제를 없애기 위해 shot delay를 준다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shotTick</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">playerShot</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (shotTick &lt; </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        shotTick = </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">() + </span><span class=\"mtk7\">200</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, -</span><span class=\"mtk7\">1</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>그리고 나머지 충돌 처리도 한다. 적기와 플레이어의 비행기는 영역을 갖는 <code>Rectangle</code>이므로 <code>Rectangle</code>의 <code>intersect</code> 함수를 쓰면 간단하다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">checkCollision</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HashSet</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HashSet</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipWidth</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), shipHeight = </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyWidth</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), enemyHeight = </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">() - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; ++i) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = i + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; j &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">(); ++j) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(i), rhs = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(j);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">8</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(rhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - shipWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - shipHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, shipWidth, shipHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; enemyWidth</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; enemyHeight) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(enemyPos);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(bullet);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; shipWidth</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; shipHeight) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(bullet);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">() - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; ++i) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(i);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - enemyWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - enemyHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, enemyWidth, enemyHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = i + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; j &lt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">(); ++j) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(j);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rhsRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - enemyWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - enemyHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, enemyWidth, enemyHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\">.</span><span class=\"mtk11\">intersects</span><span class=\"mtk1\">(rhsRect)) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(rhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\">.</span><span class=\"mtk11\">intersects</span><span class=\"mtk1\">(shipRect)) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">removal</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> removeBulletSet)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(removal);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">removal</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> removeEnemySet)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(removal);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>엄청나게 대충 작성한 결과로 적기가 자신이 쏜 총알에 맞아 사망하는 놀라운 일이 발생했다(…)</p>\n<p>여기까지 코드 전문은 다음과 같다.</p>\n<pre class=\"default-dark vscode-highlight\" data-language=\"java\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.util.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.event.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> java.awt.geom.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> javax.swing.*;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Tatieul</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPanel</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">KeyListener</span><span class=\"mtk1\">, </span><span class=\"mtk10\">ActionListener</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(</span><span class=\"mtk7\">320</span><span class=\"mtk1\">, </span><span class=\"mtk7\">400</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">, </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ArrayList</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">spawnTick</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shotTick</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setPreferredSize</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Dimension</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setFocusable</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">addKeyListener</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        ship = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;player.png&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        enemy = </span><span class=\"mtk12\">Toolkit</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDefaultToolkit</span><span class=\"mtk1\">().</span><span class=\"mtk11\">getImage</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;enemy.png&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> javax.swing.</span><span class=\"mtk11\">Timer</span><span class=\"mtk1\">(</span><span class=\"mtk7\">100</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">).</span><span class=\"mtk11\">start</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyPressed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getKeyCode</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_UP</span><span class=\"mtk15\">:</span><span class=\"mtk1\">    </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_DOWN</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_LEFT</span><span class=\"mtk15\">:</span><span class=\"mtk1\">  </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> -= </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_RIGHT</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk12\">KeyEvent</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VK_SPACE</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk11\">playerShot</span><span class=\"mtk1\">(); </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">playerShot</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (shotTick &lt; </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            shotTick = </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">() + </span><span class=\"mtk7\">200</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - (</span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">8</span><span class=\"mtk1\">), -</span><span class=\"mtk7\">1</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">actionPerformed</span><span class=\"mtk1\">(</span><span class=\"mtk10\">ActionEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">updateEnemyPos</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">updateBullets</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">checkCollision</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">generateEnemy</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">generateEnemyBullet</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk11\">repaint</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">checkCollision</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HashSet</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Set</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HashSet</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt;();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipWidth</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), shipHeight = </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyWidth</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), enemyHeight = </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">() - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; ++i) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = i + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; j &lt; </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">(); ++j) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(i), rhs = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(j);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">8</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(rhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - shipWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - shipHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, shipWidth, shipHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; enemyWidth</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                        &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; enemyHeight) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(enemyPos);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(bullet);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">) &lt; shipWidth</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    &amp;&amp; </span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">abs</span><span class=\"mtk1\">(</span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">) &lt; shipHeight) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeBulletSet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(bullet);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">() - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; ++i) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(i);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - enemyWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">lhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - enemyHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, enemyWidth, enemyHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = i + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; j &lt; </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">size</span><span class=\"mtk1\">(); ++j) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(j);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk10\">Rectangle2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rhsRect</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Rectangle2D.</span><span class=\"mtk11\">Double</span><span class=\"mtk1\">(</span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - enemyWidth / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">rhs</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - enemyHeight / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, enemyWidth, enemyHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\">.</span><span class=\"mtk11\">intersects</span><span class=\"mtk1\">(rhsRect)) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(rhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">lhsRect</span><span class=\"mtk1\">.</span><span class=\"mtk11\">intersects</span><span class=\"mtk1\">(shipRect)) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">removeEnemySet</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(lhs);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">removal</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> removeBulletSet)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(removal);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">removal</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> removeEnemySet)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(removal);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateEnemyPos</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pos</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">(),</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() + </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">delta</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() &gt; </span><span class=\"mtk7\">560</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">updateBullets</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Iterator</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">iterator</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">while</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">hasNext</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">next</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> += </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> * </span><span class=\"mtk7\">20</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> ((</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    || (</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">560</span><span class=\"mtk1\">))</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">iterator</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateEnemy</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (spawnTick &lt; </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">()) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            spawnTick = </span><span class=\"mtk12\">System</span><span class=\"mtk1\">.</span><span class=\"mtk11\">currentTimeMillis</span><span class=\"mtk1\">() + </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">().</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2000</span><span class=\"mtk1\">) + </span><span class=\"mtk7\">500</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">enemies</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateEnemyBullet</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">random</span><span class=\"mtk1\">() &lt; </span><span class=\"mtk7\">0.2</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk12\">bullets</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">((</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">(),</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                        (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() + (</span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">8</span><span class=\"mtk1\">), </span><span class=\"mtk7\">1</span><span class=\"mtk1\">));</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyReleased</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">keyTyped</span><span class=\"mtk1\">(</span><span class=\"mtk10\">KeyEvent</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">paintComponent</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Graphics</span><span class=\"mtk1\"> </span><span class=\"mtk12\">g</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">white</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fillRect</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">640</span><span class=\"mtk1\">, </span><span class=\"mtk7\">480</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(ship, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">shipPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">ship</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> enemies) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawImage</span><span class=\"mtk1\">(enemy, (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getX</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getWidth</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                    (</span><span class=\"mtk10\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">enemyPos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">current</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getY</span><span class=\"mtk1\">() - </span><span class=\"mtk12\">enemy</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getHeight</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setColor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Color</span><span class=\"mtk1\">.</span><span class=\"mtk12\">black</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bullet</span><span class=\"mtk15\">:</span><span class=\"mtk1\"> bullets)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk12\">g</span><span class=\"mtk1\">.</span><span class=\"mtk11\">drawLine</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bullet</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">4</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">main</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">JFrame</span><span class=\"mtk1\"> </span><span class=\"mtk12\">frame</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JFrame</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Tatieul - New Generation Shooting Game&quot;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setContentPane</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Tatieul</span><span class=\"mtk1\">());</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pack</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setLocationRelativeTo</span><span class=\"mtk1\">(</span><span class=\"mtk4\">null</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setDefaultCloseOperation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">JFrame</span><span class=\"mtk1\">.</span><span class=\"mtk12\">EXIT_ON_CLOSE</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk12\">frame</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setVisible</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">EnemyPos</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delta</span><span class=\"mtk1\">, </span><span class=\"mtk12\">current</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">EnemyPos</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">shipHeight</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Random</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rand</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Random</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">float</span><span class=\"mtk1\"> </span><span class=\"mtk12\">lifetime</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextFloat</span><span class=\"mtk1\">() * </span><span class=\"mtk7\">50</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">50</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">startX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">endX</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">rand</span><span class=\"mtk1\">.</span><span class=\"mtk11\">nextInt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">640</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        delta = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">((endX - startX) / lifetime, (</span><span class=\"mtk7\">480</span><span class=\"mtk1\"> + shipHeight * </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) / lifetime);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        current = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> Point2D.</span><span class=\"mtk11\">Float</span><span class=\"mtk1\">(startX, -</span><span class=\"mtk7\">1</span><span class=\"mtk1\"> * shipHeight);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Bullet</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Point</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pos</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">direction</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Bullet</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">direction</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pos</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Point</span><span class=\"mtk1\">(x, y);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">direction</span><span class=\"mtk1\"> = direction;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>억지로 한 파일에 최대한 짧고 대충 짜려다보니 코드가 개판이 되었다. 여러 이슈가 있겠지만, 일단 다음번에는 저걸 보다 구조화하는 작업을 해보도록 하자. (안 그러면 코드가 너무 더러워서 도저히 진행을 못할 것 같다-_-)</p>\n<style class=\"vscode-highlight-styles\">:root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n.default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n\n.default-dark .mtk1 { color: #D4D4D4; }\n.default-dark .mtk2 { color: #1E1E1E; }\n.default-dark .mtk3 { color: #6A9955; }\n.default-dark .mtk4 { color: #569CD6; }\n.default-dark .mtk5 { color: #D16969; }\n.default-dark .mtk6 { color: #D7BA7D; }\n.default-dark .mtk7 { color: #B5CEA8; }\n.default-dark .mtk8 { color: #CE9178; }\n.default-dark .mtk9 { color: #646695; }\n.default-dark .mtk10 { color: #4EC9B0; }\n.default-dark .mtk11 { color: #DCDCAA; }\n.default-dark .mtk12 { color: #9CDCFE; }\n.default-dark .mtk13 { color: #000080; }\n.default-dark .mtk14 { color: #F44747; }\n.default-dark .mtk15 { color: #C586C0; }\n.default-dark .mtk16 { color: #6796E6; }\n.default-dark .mtk17 { color: #808080; }\n.default-dark .mtki { font-style: italic; }\n.default-dark .mtkb { font-weight: bold; }\n.default-dark .mtku { text-decoration: underline; text-underline-position: under; }</style>","excerpt":"이번에는 적기의 등장과 충돌검사를 해보자. 적기는, y=0에서 등장해서 y=height까지 진행한다. 즉, 화면 위쪽에서 아래쪽으로 일직선으로 진행하도록 하자. 그러면 진행하는 y 값은 항상 동일할테니까(0 -> height) 시작과 끝 x…","fields":{"date":"November 06, 2011","shortdesc":""},"frontmatter":{"title":"자바로 만드는 비행기 게임 3","tags":["java","game"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2011/11/06/flight-game-with-java-3/"}}}